<!doctype html>
  <html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Laravel Proxy Getway | saidqb - hanya berbagi</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Laravel Proxy Getway" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="saidqb di github, berbagi pengalaman sebagai seorang programmer" />
<meta property="og:description" content="saidqb di github, berbagi pengalaman sebagai seorang programmer" />
<link rel="canonical" href="http://localhost:4000/p/laravel/laravel-proxy-getway.html" />
<meta property="og:url" content="http://localhost:4000/p/laravel/laravel-proxy-getway.html" />
<meta property="og:site_name" content="saidqb - hanya berbagi" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Laravel Proxy Getway" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"saidqb di github, berbagi pengalaman sebagai seorang programmer","headline":"Laravel Proxy Getway","url":"http://localhost:4000/p/laravel/laravel-proxy-getway.html"}</script>
<!-- End Jekyll SEO tag -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/assets/css/custom.css">
    <script src="https://code.jquery.com/jquery-3.3.0.min.js" integrity="sha256-RTQy8VOmNlT6b2PIRur37p6JEBZUE7o8wPgMvu18MC4=" crossorigin="anonymous"></script>
    <script src="/assets/js/main.js"></script>
    <!--[if lt IE 9]>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    <![endif]-->
      <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

      <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">

<!-- end custom head snippets -->
<meta name="google-site-verification" content="b7m6OiWPaDdkJzajEQdfMX7SrmKPESNMqHj6bXXNq8A" />
    </head>
    <body>

      <header>
<!--         <h1>Laravel Proxy Getway</h1>
  <p>saidqb di github, berbagi pengalaman sebagai seorang programmer</p> -->
</header>

<div id="banner">

<a href="/" class="button fork"><strong><i class="fa fa-home"></i></strong></a>
<a href="/link" class="button fork"><strong><i class="fa fa-list"></i></strong></a>
<a href="/coffee" class="button fork"><strong><i class="fa fa-coffee"></i> Coffee</strong></a>
<!-- <a href="" class="button fork"><strong>View On GitHub</strong></a> -->

</div><!-- end banner -->


<div class="wrapper">
  <nav>
    <ul></ul>
  </nav>
  <section class="content">
    <p>https://dev.to/azophy/using-laravel-as-a-service-proxygateway-3ig9</p>

<p>BASIC</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>use GuzzleHttp\Client as HttpClient;
Route::any('/proxy/{path}', function(Request $req, $path) {
  $client = new HttpClient([
    'base_uri' =&gt; 'https://httpbin.org'
  ]);

  return $client-&gt;request($req-&gt;method(), $path);
});

</code></pre></div></div>

<p>EXPERT</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
// you could use either routes/web.php or routes/api.php

// simple helper function to filter header array on request &amp; response
function filterHeaders($headers) {
    $allowedHeaders = ['accept', 'content-type'];

    return array_filter($headers, function($key) use ($allowedHeaders) {
        return in_array(strtolower($key), $allowedHeaders);
    }, ARRAY_FILTER_USE_KEY);
}

Route::any('/proxy_example/{path}', function(Request $request, $path) {
    $client = new GuzzleHttp\Client([
        // Base URI is used with relative requests
        'base_uri' =&gt; 'https://pie.dev', // public dummy API for example
        // You can set any number of default request options.
        'timeout'  =&gt; 60.0,
        'http_errors' =&gt; false, // disable guzzle exception on 4xx or 5xx response code
    ]);

    // create request according to our needs. we could add
    // custom logic such as auth flow, caching mechanism, etc
    $resp = $client-&gt;request($request-&gt;method(), $path, [
        'headers' =&gt; filterHeaders($request-&gt;header()),
        'query' =&gt; $request-&gt;query(),
        'body' =&gt; $request-&gt;getContent(),
    ]);

    // recreate response object to be passed to actual caller 
    // according to our needs.
    return response($resp-&gt;getBody()-&gt;getContents(), $resp-&gt;getStatusCode())
       -&gt;withHeaders(filterHeaders($resp-&gt;getHeaders()));

})-&gt;where('path', '.*'); // required to allow $path to catch all sub-path


</code></pre></div></div>


  </section>
  <footer class="copyright">
  
  <p>
    <small>Hosted on GitHub &mdash; Theme by <a href="https://twitter.com/mattgraham">mattgraham</a></small> 
    <br/>
    <small>Custom by <a href="https://github.com/saidqb">saidqb</a></small>
  </p>
</footer>

</div>
</body>
</html>
